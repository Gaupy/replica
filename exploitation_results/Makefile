OCAMLC=ocamlc
OCAMLDEP=ocamldep

OBJS=const.cmo explo.cmo
CMOBJS=const.cmo explo.cmo

all : dep compcaml

compcaml : $(OBJS)
	$(OCAMLC) -o comp $(CMOBJS)


# Common rules
.SUFFIXES: .ml .mli .cmo .cmi .cmx .mly .mll

.ml.cmo:
	$(OCAMLC) $(OCAMLFLAGS) -c $<

.mli.cmi:
	$(OCAMLC) $(OCAMLFLAGS) -c $<

.ml.cmx:
	$(OCAMLOPT) $(OCAMLFLAGS) -c $<

.mly.ml:
	$(OCAMLYACC) $<

.mly.mli:
	$(OCAMLYACC) $<
.mll.ml:
	$(OCAMLLEX) $<

dep:
	$(OCAMLDEP) *.ml *.mli > .dep

clean:
	rm -f *.o *.cmx *.cmo *.cmi *.out *.pdf *.toc *.blg *.bbl *.lot

include .dep
